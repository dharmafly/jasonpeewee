/*!
    Jason Peewee
    A cache-friendly JSONP super-assistant

    by Premasagar Rose <http://premasagar.com>,
       Dharmafly <http://dharmafly.com>

    Repo: <https://github.com/dharmafly/jasonpeewee>
    MIT license: http://opensource.org/licenses/mit-license.php

*/
function j(a){var b=k[a]=[];l[a]=function(a){for(var c=b.length,f=0;f<c;f++)b[f](a)};return b}function m(a,b,e,c){function f(a){s=d.onload=d.onreadystatechange=d.onerror=null;t.removeChild(d);a=!0===a;delete k[g];delete l[g];!a&&u&&u({error:"JSONP failed",url:v})}var w="callback",x,y,g;"function"===typeof b&&(c=e,e=b,b=null);c&&(c.a&&(w=c.a),y=c.error,x=c.charset);a+=-1===a.indexOf("?")?"?":"&";if(b){c=q(b).sort();for(var C=c.length,n=0,p="";n<C;n++){var h;h=c[n];var D=b[h];h=r(h)+"="+r(D);p+="&"+h}b=p.slice(1)+"&"}else b="";a+=b;g=z(a);a+=w+"="+m.path+"."+g;(k[g]||j(g)).push(e);var u=y,v=a;e=x;var t=A.head||A.getElementsByTagName("head")[0],d=A.createElement("script"),s=!0;d.type="text/javascript";d.charset=e||"utf-8";d.src=v;d.onload=d.onreadystatechange=function(){var a=this.readyState;s&&(!a||"complete"===a||"loaded"===a)&&f(!0)};d.onerror=f;t.appendChild(d);return a}var B=this.define,A=this.document,r=this.encodeURIComponent,q=this.Object.keys,l={},k={},z,E=/[^\w\$]+/ig;z=function(a){return a?a.replace(E,"_"):"_"};q||(q=function(a){var b=[],e;for(e in a)a.hasOwnProperty(e)&&b.push(e);return b});this._jasonpeeweeFn=l;m.path="_jasonpeeweeFn";"function"===typeof B&&B.amd?B([],function(){return m}):this.jasonpeewee=m;