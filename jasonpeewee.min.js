/*!
    Jason Peewee
    A cache-friendly JSONP super-assistant

    by Premasagar Rose <http://premasagar.com>,
       Dharmafly <http://dharmafly.com>

    Repo: <https://github.com/dharmafly/jasonpeewee>
    MIT license: http://opensource.org/licenses/mit-license.php

*/
function k(a,b){var c=a[b];return l(b)+"="+l(c)}function m(a,b){var c="",d,f,g,h;if(!0===b){d=n(a).sort();g=0;for(h=d.length;g<h;g++)f=d[g],g&&(c+="&"),c+=k(a,f)}else for(f in a)a.hasOwnProperty(f)&&(c+=k(a,f));return c}function p(a){var b=q[a]=[];r[a]=function(c){for(var d=b.length;d;d--)b.shift()(c);s(a)};return b}function s(a){var b=q[a];b&&!b.length&&(delete q[a],delete r[a])}function t(a,b,c,d){function f(){v=e.onload=e.onreadystatechange=e.onerror=null;w.removeChild(e)}var g="callback",h={},x,j;"function"===typeof b&&(d=c,c=b,b=null);d&&(d.a&&(g=d.a),d.error&&(x=d.error),d.charset&&(h.charset=d.charset));a+=-1===a.indexOf("?")?"?":"&";a+=b?m(b,!0)+"&":"";j=u(a);a+=g+"="+t.path+"."+j;(q[j]||p(j)).push(c);var z=x;h.error=function(a){var b=q[j];b&&b.shift();s(j);z&&z({error:"JSONP failed",url:a})};var A=a,w=y.head||y.getElementsByTagName("head")[0],e=y.createElement("script"),v=!0;e.type="text/javascript";e.charset=h.charset||"utf-8";e.src=A;e.onload=e.onreadystatechange=function(){var a=this.readyState;v&&(!a||"complete"===a||"loaded"===a)&&f()};e.onerror=function(){f();h.error(A)};w.appendChild(e);return a}var B=this.define,y=this.document,l=this.encodeURIComponent,n=this.Object.keys,r={},q={},u,C=/[^\w\$]+/ig;u=function(a){return a?a.replace(C,"_"):"_"};n||(n=function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);return b});this._jasonpeeweeFn=r;t.path="_jasonpeeweeFn";t.encodeURLQueryString=m;"function"===typeof B&&B.amd?B([],function(){return t}):this.jasonpeewee=t;